{"version":3,"sources":["js/panels/home/placeholder.js"],"names":["HomePanelPlaceholder","_ref","router","mailId","login","domain","_useState","isDesktop","useState","_useState2","Object","C_Users_olegc_OneDrive_GitHub_10_minutes_mail_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","from","setFrom","_useState3","_useState4","title","setTitle","_useState5","_useState6","date","setDate","_useState7","_useState8","body","setBody","_useState9","_useState10","attachments","setAttachments","_readMail","C_Users_olegc_OneDrive_GitHub_10_minutes_mail_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","C_Users_olegc_OneDrive_GitHub_10_minutes_mail_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","response","responseJSON","wrap","_context","prev","next","fetch","concat","sent","json","console","log","subject","htmlBody","replace","t0","toBack","stop","apply","this","arguments","useEffect","readMail","react__WEBPACK_IMPORTED_MODULE_3___default","createElement","Fragment","_vkontakte_vkui__WEBPACK_IMPORTED_MODULE_4__","separator","left","onClick","top","style","whiteSpace","id","dangerouslySetInnerHTML","__html","length","map","el","bottom","size","stretched","href","filename"],"mappings":"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","file":"static/js/6.bbbea51e.chunk.js","sourcesContent":["import React, {useEffect, useState} from 'react';\r\n\r\nimport {\r\n    PanelHeader,\r\n    PanelHeaderBack,\r\n    Group, FormItem,\r\n    Div,\r\n    Button,\r\n    FormLayout,\r\n} from \"@vkontakte/vkui\";\r\n\r\nfunction HomePanelPlaceholder({router, mailId, login, domain, isDesktop}) {\r\n\r\n    const [from, setFrom] = useState(null)\r\n    const [title, setTitle] = useState(null)\r\n    const [date, setDate] = useState(null)\r\n    const [body, setBody] = useState(null)\r\n    const [attachments, setAttachments] = useState([])\r\n\r\n    async function readMail() {\r\n        try {\r\n            let response = await fetch(`https://www.1secmail.com/api/v1/?action=readMessage&login=${login}&domain=${domain}&id=${mailId}`)\r\n            let responseJSON = await response.json()\r\n            console.log(responseJSON)\r\n            setFrom(responseJSON.from)\r\n            setTitle(responseJSON.subject)\r\n            setDate(responseJSON.date)\r\n            setAttachments(responseJSON.attachments)\r\n            setBody(replace(responseJSON.htmlBody))\r\n        }\r\n        catch (err) {\r\n            console.log(err)\r\n            router.toBack()\r\n        }\r\n    }\r\n\r\n    useEffect(\r\n        () => {readMail()}, []\r\n    )\r\n\r\n    function replace(text) {\r\n        let html = text\r\n        html = text.replace(/<a/gi, `<a target='_blank'`)\r\n        return html\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <PanelHeader \r\n                separator\r\n                left={<PanelHeaderBack onClick={() => router.toBack()}/>}\r\n            >\r\n                Письмо\r\n            </PanelHeader>\r\n\r\n            <Group>\r\n                <FormLayout>\r\n                    <FormItem top={'От'}>\r\n                        {from}\r\n                    </FormItem>\r\n                    <FormItem top={'Заголовок'} style={{whiteSpace: 'pre-line'}}>\r\n                        {title !== '' ? title : 'Без темы'}\r\n                    </FormItem>\r\n                    <FormItem top={'Текст письма'} style={{whiteSpace: 'pre-line'}}>\r\n                        <div id='html' dangerouslySetInnerHTML={{__html: body }}/>\r\n                    </FormItem>\r\n                    <FormItem top={'Дата'}>\r\n                        {date}\r\n                    </FormItem>\r\n                    {attachments.length !== 0 &&\r\n                        attachments.map((el) => {\r\n                                return(\r\n                                    <FormItem top='Вложение' bottom='Показывается только первое вложение'>\r\n                                        <Button\r\n                                            size='l'\r\n                                            stretched\r\n                                            href={`https://www.1secmail.com/api/v1/?action=download&login=${login}&domain=${domain}&id=${mailId}&file=${el.filename}`}\r\n                                        >\r\n                                            Скачать\r\n                                        </Button>\r\n                                    </FormItem>\r\n                                )\r\n                            }\r\n                        )}\r\n\r\n                    <Div>\r\n                        <Button\r\n                            size='l'\r\n                            stretched\r\n                            onClick={() => router.toBack()}\r\n                        >\r\n                            Закрыть\r\n                        </Button>\r\n                    </Div>\r\n                </FormLayout>\r\n            </Group>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default HomePanelPlaceholder;"],"sourceRoot":""}