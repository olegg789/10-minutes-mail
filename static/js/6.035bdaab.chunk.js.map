{"version":3,"sources":["js/panels/home/placeholder.js"],"names":["HomePanelPlaceholder","_ref","router","mailId","login","domain","_useState","isDesktop","useState","_useState2","Object","C_Users_olegc_OneDrive_GitHub_10_minutes_mail_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","from","setFrom","_useState3","_useState4","title","setTitle","_useState5","_useState6","text","setText","_useState7","_useState8","date","setDate","_useState9","_useState10","setBody","_useState11","_useState12","attachments","setAttachments","_readMail","C_Users_olegc_OneDrive_GitHub_10_minutes_mail_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","C_Users_olegc_OneDrive_GitHub_10_minutes_mail_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","response","responseJSON","wrap","_context","prev","next","fetch","concat","sent","json","console","log","subject","textBody","htmlBody","t0","toBack","stop","apply","this","arguments","useEffect","readMail","react__WEBPACK_IMPORTED_MODULE_3___default","createElement","Fragment","_vkontakte_vkui__WEBPACK_IMPORTED_MODULE_4__","separator","left","onClick","top","style","whiteSpace","length","map","el","bottom","size","stretched","href","filename"],"mappings":"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","file":"static/js/6.035bdaab.chunk.js","sourcesContent":["import React, {useEffect, useState} from 'react';\r\n\r\nimport {\r\n    PanelHeader,\r\n    PanelHeaderBack,\r\n    Group, FormItem, Div, Button, FormLayout,\r\n} from \"@vkontakte/vkui\";\r\n\r\nfunction HomePanelPlaceholder({router, mailId, login, domain, isDesktop}) {\r\n\r\n    const [from, setFrom] = useState(null)\r\n    const [title, setTitle] = useState(null)\r\n    const [text, setText] = useState(null)\r\n    const [date, setDate] = useState(null)\r\n    const [body, setBody] = useState(null)\r\n    const [attachments, setAttachments] = useState([])\r\n\r\n    async function readMail() {\r\n        try {\r\n            let response = await fetch(`https://www.1secmail.com/api/v1/?action=readMessage&login=${login}&domain=${domain}&id=${mailId}`)\r\n            let responseJSON = await response.json()\r\n            console.log(responseJSON)\r\n            setFrom(responseJSON.from)\r\n            setTitle(responseJSON.subject)\r\n            setText(responseJSON.textBody)\r\n            setDate(responseJSON.date)\r\n            setAttachments(responseJSON.attachments)\r\n            setBody(responseJSON.htmlBody)\r\n        }\r\n        catch (err) {\r\n            router.toBack()\r\n        }\r\n    }\r\n\r\n    useEffect(\r\n        () => {readMail()}, []\r\n    )\r\n\r\n    return(\r\n        <>\r\n            <PanelHeader \r\n                separator\r\n                left={<PanelHeaderBack onClick={() => router.toBack()}/>}\r\n            >\r\n                Письмо\r\n            </PanelHeader>\r\n\r\n            <Group>\r\n                <FormLayout>\r\n                    <FormItem top={'От'}>\r\n                        {from}\r\n                    </FormItem>\r\n                    <FormItem top={'Заголовок'} style={{whiteSpace: 'pre-line'}}>\r\n                        {title !== '' ? title : 'Без темы'}\r\n                    </FormItem>\r\n                    <FormItem top={'Текст письма'} style={{whiteSpace: 'pre-line'}}>\r\n                        {text !== '' ? text : 'Без текста'}\r\n                    </FormItem>\r\n                    <FormItem top={'Дата'}>\r\n                        {date}\r\n                    </FormItem>\r\n                    {attachments.length !== 0 &&\r\n                        attachments.map((el) => {\r\n                                return(\r\n                                    <FormItem top='Вложение' bottom='Показывается только первое вложение'>\r\n                                        <Button\r\n                                            size='l'\r\n                                            stretched\r\n                                            href={`https://www.1secmail.com/api/v1/?action=download&login=${login}&domain=${domain}&id=${mailId}&file=${el.filename}`}\r\n                                        >\r\n                                            Скачать\r\n                                        </Button>\r\n                                    </FormItem>\r\n                                )\r\n                            }\r\n                        )}\r\n                    <Div>\r\n                        <Button\r\n                            size='l'\r\n                            stretched\r\n                            onClick={() => router.toBack()}\r\n                        >\r\n                            Закрыть\r\n                        </Button>\r\n                    </Div>\r\n                </FormLayout>\r\n            </Group>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default HomePanelPlaceholder;"],"sourceRoot":""}